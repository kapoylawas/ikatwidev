import{r as n,R as e,H as S}from"./app.6ff4c64e.js";import{L as P}from"./Web.51bd070b.js";import{a as A}from"./index.a14f916e.js";import"./Dropdown.02aa6361.js";import"./index.249e753f.js";function L({provinces:N,cities:h}){const[m,o]=n.exports.useState([]),[b,u]=n.exports.useState(!1),[c,E]=n.exports.useState(""),[r,p]=n.exports.useState(""),[d,g]=n.exports.useState(""),v=new Date,i=(a,t,s)=>{u(!0),o([]),A.post("/searchAnggota",{q:a,dpc:t,dpw:s}).then(l=>{console.log("data",l),u(!1),o(l.data.anggota.data)})},f=a=>{const t=a.target.value;g(t),i(t,r,c)},y=a=>{const t=a.target.value;E(t),i(d,r,t)},x=a=>{const t=a.target.value;p(t),i(d,t,c)},k=()=>{g(""),E(""),p(""),o([])},w=a=>a.length===0?[{status:"Belum Bayar",isPaid:!1,tahun:null}]:a.sort((s,l)=>l.tahun-s.tahun).map(s=>({status:s.status,isPaid:!0,tahun:s.tahun}));return e.createElement(e.Fragment,null,e.createElement(S,null,e.createElement("title",null,"IKATWI - Daftar Anggota")),e.createElement(P,null,e.createElement("div",{className:"container",style:{marginTop:"100px",marginBottom:"50px"}},e.createElement("div",{className:"fade-in"},e.createElement("div",{className:"row justify-content-center"},e.createElement("div",{className:"col-md-8"},e.createElement("div",{className:"text-center mb-4"},e.createElement("h4",{className:"font-weight-bold text-primary mb-2"},e.createElement("i",{className:"fas fa-users me-2"}),"Daftar Anggota IKATWI"),e.createElement("p",{className:"text-muted"},"Temukan informasi anggota Ikatan Terapis Wicara Indonesia")),e.createElement("div",{className:"card border-0 rounded shadow-sm mb-4"},e.createElement("div",{className:"card-body p-3"},e.createElement("div",{className:"row g-2"},e.createElement("div",{className:"col-md-12 mb-2"},e.createElement("div",{className:"input-group"},e.createElement("span",{className:"input-group-text bg-light border-end-0"},e.createElement("i",{className:"fas fa-search text-muted"})),e.createElement("input",{type:"text",className:"form-control border-start-0",value:d,onChange:f,placeholder:"Cari berdasarkan nama atau nomor anggota..."}))),e.createElement("div",{className:"col-md-6"},e.createElement("select",{className:"form-select",onChange:y,value:c},e.createElement("option",{value:""},"Semua DPW"),N.map(a=>e.createElement("option",{key:a.id,value:a.id},a.name)))),e.createElement("div",{className:"col-md-6"},e.createElement("select",{className:"form-select",onChange:x,value:r},e.createElement("option",{value:""},"Semua DPC"),h.map(a=>e.createElement("option",{key:a.id,value:a.id},a.name))))),e.createElement("div",{className:"row mt-2"},e.createElement("div",{className:"col-12"},e.createElement("button",{onClick:k,className:"btn btn-outline-secondary btn-sm"},e.createElement("i",{className:"fas fa-times me-1"}),"Hapus Filter"))))),m.length>0&&e.createElement("div",{className:"alert alert-info mb-3 py-2"},e.createElement("i",{className:"fas fa-info-circle me-2"}),"Menampilkan ",m.length," anggota"),e.createElement("div",{className:"card border-0 rounded shadow-sm"},e.createElement("div",{className:"card-header bg-primary text-white py-2"},e.createElement("h5",{className:"mb-0"},e.createElement("i",{className:"fas fa-list me-2"}),"Data Anggota")),e.createElement("div",{className:"card-body p-0"},b?e.createElement("div",{className:"text-center py-4"},e.createElement("div",{className:"spinner-border text-primary mb-2",role:"status"},e.createElement("span",{className:"visually-hidden"},"Loading...")),e.createElement("p",{className:"text-muted"},"Memuat data anggota...")):m.length>0?e.createElement("div",{className:"table-responsive"},e.createElement("table",{className:"table table-bordered table-striped table-hovered mb-0"},e.createElement("thead",null,e.createElement("tr",null,e.createElement("th",{scope:"col",style:{width:"3%"}},"No"),e.createElement("th",{scope:"col",style:{width:"8%"}},"Foto"),e.createElement("th",{scope:"col",style:{width:"10%"}},"No Anggota"),e.createElement("th",{scope:"col",style:{width:"15%"}},"Nama"),e.createElement("th",{scope:"col",style:{width:"15%"}},"DPW"),e.createElement("th",{scope:"col",style:{width:"15%"}},"DPC"),e.createElement("th",{scope:"col",style:{width:"14%"}},"Status SIP"),e.createElement("th",{scope:"col",style:{width:"10%"}},"Status Iuran"))),e.createElement("tbody",null,m.map((a,t)=>{const s=w(a.transaction);return e.createElement("tr",{key:t,className:"align-middle"},e.createElement("td",{className:"text-center"},t+1),e.createElement("td",{className:"text-center"},e.createElement("img",{src:a.image,className:"rounded-3",width:"50",alt:a.name,onError:l=>{l.target.onerror=null,l.target.src="/assets/images/user.png"}})),e.createElement("td",null,e.createElement("span",{className:"fw-bold text-dark"},a.no_anggota)),e.createElement("td",{className:"fw-semibold text-dark"},a.name),e.createElement("td",null,a.province.name),e.createElement("td",null,a.city===0?e.createElement("span",{className:"text-muted"},"DPC tidak ada"):a.city.name),e.createElement("td",null,new Date(a.surat_sip.map(l=>l.date_end))>=v?e.createElement("span",{className:"badge bg-success"},"Aktif"):e.createElement("span",{className:"badge bg-danger"},"Non Aktif")),e.createElement("td",null,s[0].isPaid?e.createElement("div",{className:"d-flex flex-wrap gap-1 justify-content-center"},s.map((l,C)=>e.createElement("span",{key:C,className:"badge bg-success",title:`Tahun ${l.tahun}`},l.tahun))):e.createElement("span",{className:"badge bg-warning text-dark"},"Belum Bayar")))})))):e.createElement("div",{className:"text-center py-4"},e.createElement("i",{className:"fas fa-users fa-2x text-muted mb-2"}),e.createElement("h6",{className:"text-muted"},"Tidak ada data anggota"),e.createElement("p",{className:"text-muted small"},d||c||r?"Coba ubah kata kunci atau filter pencarian":"Gunakan form pencarian di atas untuk menemukan anggota")))),e.createElement("div",{className:"row mt-3 mb-4"},e.createElement("div",{className:"col-md-12"},e.createElement("div",{className:"card border-0 bg-light rounded"},e.createElement("div",{className:"card-body py-2"},e.createElement("h6",{className:"mb-2"},e.createElement("i",{className:"fas fa-info-circle me-2 text-primary"}),"Keterangan Status:"),e.createElement("div",{className:"row"},e.createElement("div",{className:"col-md-3 mb-1"},e.createElement("span",{className:"badge bg-success me-1"},"\u25CF"),e.createElement("small",null,"Lunas (Tahun)")),e.createElement("div",{className:"col-md-3 mb-1"},e.createElement("span",{className:"badge bg-danger me-1"},"\u25CF"),e.createElement("small",null,"Non Aktif SIP")),e.createElement("div",{className:"col-md-3 mb-1"},e.createElement("span",{className:"badge bg-warning text-dark me-1"},"\u25CF"),e.createElement("small",null,"Belum Bayar"))),e.createElement("div",{className:"row mt-1"},e.createElement("div",{className:"col-12"},e.createElement("small",{className:"text-muted"},e.createElement("i",null,"Angka pada badge hijau menunjukkan tahun iuran yang sudah dibayar"))))))))))))))}export{L as default};
