import{r as c,R as e,H as B}from"./app.f41a7b80.js";import{L}from"./Web.f63d4987.js";import{a as _}from"./index.d24ba81d.js";import"./Dropdown.2942ee5c.js";import"./index.249e753f.js";function K({provinces:h,cities:i}){var w,x;const[u,p]=c.exports.useState([]),[k,N]=c.exports.useState(!1),[n,b]=c.exports.useState(""),[l,E]=c.exports.useState(""),[r,v]=c.exports.useState(""),[y,g]=c.exports.useState(i),P=new Date;c.exports.useEffect(()=>{if(n){const t=i.filter(a=>a.province_id==n);g(t)}else g(i);E("")},[n,i]);const f=(t,a,m)=>{N(!0),p([]),_.post("/searchAnggota",{q:t,dpc:a,dpw:m}).then(s=>{console.log("data",s),N(!1),p(s.data.anggota.data)})},S=t=>{const a=t.target.value;v(a),f(a,l,n)},A=t=>{const a=t.target.value;b(a),f(r,l,a)},D=t=>{const a=t.target.value;E(a),f(r,a,n)},C=()=>{v(""),b(""),E(""),p([]),g(i)},I=t=>!t||t.length===0?[{status:"Belum Bayar",isPaid:!1,tahun:null}]:t.sort((m,s)=>s.tahun-m.tahun).map(m=>({status:m.status,isPaid:!0,tahun:m.tahun})),T=t=>{if(!t||t.length===0)return{isActive:!1,status:"Non Aktif SIP"};const a=t.reduce((s,o)=>new Date(o.date_end)>new Date(s.date_end)?o:s),m=new Date(a.date_end)>=P;return{isActive:m,status:m?"Aktif":"Non Aktif SIP"}};return e.createElement(e.Fragment,null,e.createElement(B,null,e.createElement("title",null,"IKATWI - Daftar Anggota"),e.createElement("style",null,`
                    .custom-badge-lunas {
                        background: #28a745 !important;
                        color: white !important;
                        border: none !important;
                        padding: 0.35em 0.65em !important;
                        font-size: 0.75em !important;
                        font-weight: 700 !important;
                        line-height: 1 !important;
                        text-align: center !important;
                        white-space: nowrap !important;
                        vertical-align: baseline !important;
                        border-radius: 0.25rem !important;
                    }
                    .custom-badge-nonaktif {
                        background: #dc3545 !important;
                        color: white !important;
                        border: none !important;
                        padding: 0.35em 0.65em !important;
                        font-size: 0.75em !important;
                        font-weight: 700 !important;
                        line-height: 1 !important;
                        text-align: center !important;
                        white-space: nowrap !important;
                        vertical-align: baseline !important;
                        border-radius: 0.25rem !important;
                    }
                    .custom-badge-belumbayar {
                        background: #ffc107 !important;
                        color: #212529 !important;
                        border: none !important;
                        padding: 0.35em 0.65em !important;
                        font-size: 0.75em !important;
                        font-weight: 700 !important;
                        line-height: 1 !important;
                        text-align: center !important;
                        white-space: nowrap !important;
                        vertical-align: baseline !important;
                        border-radius: 0.25rem !important;
                    }
                    .custom-badge-aktif {
                        background: #28a745 !important;
                        color: white !important;
                        border: none !important;
                        padding: 0.35em 0.65em !important;
                        font-size: 0.75em !important;
                        font-weight: 700 !important;
                        line-height: 1 !important;
                        text-align: center !important;
                        white-space: nowrap !important;
                        vertical-align: baseline !important;
                        border-radius: 0.25rem !important;
                    }
                    `)),e.createElement(L,null,e.createElement("div",{className:"container",style:{marginTop:"100px",marginBottom:"50px"}},e.createElement("div",{className:"fade-in"},e.createElement("div",{className:"row justify-content-center"},e.createElement("div",{className:"col-md-8"},e.createElement("div",{className:"text-center mb-4"},e.createElement("h4",{className:"font-weight-bold text-primary mb-2"},e.createElement("i",{className:"fas fa-users me-2"}),"Daftar Anggota IKATWI"),e.createElement("p",{className:"text-muted"},"Temukan informasi anggota Ikatan Terapis Wicara Indonesia")),e.createElement("div",{className:"card border-0 rounded shadow-sm mb-4"},e.createElement("div",{className:"card-body p-3"},e.createElement("div",{className:"row g-2"},e.createElement("div",{className:"col-md-12 mb-2"},e.createElement("div",{className:"input-group"},e.createElement("span",{className:"input-group-text bg-light border-end-0"},e.createElement("i",{className:"fas fa-search text-muted"})),e.createElement("input",{type:"text",className:"form-control border-start-0",value:r,onChange:S,placeholder:"Cari berdasarkan nama atau nomor anggota..."}))),e.createElement("div",{className:"col-md-6"},e.createElement("select",{className:"form-select",onChange:A,value:n},e.createElement("option",{value:""},"Semua DPW"),h.map(t=>e.createElement("option",{key:t.id,value:t.id},t.name)))),e.createElement("div",{className:"col-md-6"},e.createElement("select",{className:"form-select",onChange:D,value:l,disabled:!n&&y.length===0},e.createElement("option",{value:""},"Semua DPC"),y.map(t=>e.createElement("option",{key:t.id,value:t.id},t.name))),!n&&e.createElement("small",{className:"text-muted"},"Pilih DPW terlebih dahulu untuk melihat DPC"))),e.createElement("div",{className:"row mt-2"},e.createElement("div",{className:"col-12"},e.createElement("button",{onClick:C,className:"btn btn-outline-secondary btn-sm"},e.createElement("i",{className:"fas fa-times me-1"}),"Hapus Filter"))))),u.length>0&&e.createElement("div",{className:"alert alert-info mb-3 py-2"},e.createElement("i",{className:"fas fa-info-circle me-2"}),"Menampilkan ",u.length," anggota",(n||l||r)&&e.createElement("span",null," ","dengan filter:",n&&` DPW: ${(w=h.find(t=>t.id==n))==null?void 0:w.name}`,l&&` DPC: ${(x=i.find(t=>t.id==l))==null?void 0:x.name}`,r&&` Pencarian: "${r}"`)),e.createElement("div",{className:"card border-0 rounded shadow-sm"},e.createElement("div",{className:"card-header bg-primary text-white py-2"},e.createElement("h5",{className:"mb-0"},e.createElement("i",{className:"fas fa-list me-2"}),"Data Anggota")),e.createElement("div",{className:"card-body p-0"},k?e.createElement("div",{className:"text-center py-4"},e.createElement("div",{className:"spinner-border text-primary mb-2",role:"status"},e.createElement("span",{className:"visually-hidden"},"Loading...")),e.createElement("p",{className:"text-muted"},"Memuat data anggota...")):u.length>0?e.createElement("div",{className:"table-responsive"},e.createElement("table",{className:"table table-bordered table-striped table-hovered mb-0"},e.createElement("thead",null,e.createElement("tr",null,e.createElement("th",{scope:"col",style:{width:"3%"}},"No"),e.createElement("th",{scope:"col",style:{width:"8%"}},"Foto"),e.createElement("th",{scope:"col",style:{width:"10%"}},"No Anggota"),e.createElement("th",{scope:"col",style:{width:"15%"}},"Nama"),e.createElement("th",{scope:"col",style:{width:"15%"}},"DPW"),e.createElement("th",{scope:"col",style:{width:"15%"}},"DPC"),e.createElement("th",{scope:"col",style:{width:"14%"}},"Status SIP"),e.createElement("th",{scope:"col",style:{width:"10%"}},"Status Iuran"))),e.createElement("tbody",null,u.map((t,a)=>{var o;const m=I(t.transaction),s=T(t.surat_sip);return e.createElement("tr",{key:a,className:"align-middle"},e.createElement("td",{className:"text-center"},a+1),e.createElement("td",{className:"text-center"},e.createElement("img",{src:t.image,className:"rounded-3",width:"50",alt:t.name,onError:d=>{d.target.onerror=null,d.target.src="/assets/images/user.png"}})),e.createElement("td",null,e.createElement("span",{className:"fw-bold text-dark"},t.no_anggota)),e.createElement("td",{className:"fw-semibold text-dark"},t.name),e.createElement("td",null,((o=t.province)==null?void 0:o.name)||"-"),e.createElement("td",null,!t.city||t.city===0?e.createElement("span",{className:"text-muted"},"DPC tidak ada"):t.city.name),e.createElement("td",null,s.isActive?e.createElement("span",{className:"custom-badge-aktif"},e.createElement("i",{className:"fas fa-check-circle me-1"}),"Aktif"):e.createElement("span",{className:"custom-badge-nonaktif"},e.createElement("i",{className:"fas fa-times-circle me-1"}),"Non Aktif SIP")),e.createElement("td",null,m[0].isPaid?e.createElement("div",{className:"d-flex flex-wrap gap-1 justify-content-center"},m.map((d,W)=>e.createElement("span",{key:W,className:"custom-badge-lunas",title:`Tahun ${d.tahun}`},e.createElement("i",{className:"fas fa-check me-1"}),d.tahun))):e.createElement("span",{className:"custom-badge-belumbayar"},e.createElement("i",{className:"fas fa-exclamation-triangle me-1"}),"Belum Bayar")))})))):e.createElement("div",{className:"text-center py-4"},e.createElement("i",{className:"fas fa-users fa-2x text-muted mb-2"}),e.createElement("h6",{className:"text-muted"},"Tidak ada data anggota"),e.createElement("p",{className:"text-muted small"},r||n||l?"Coba ubah kata kunci atau filter pencarian":"Gunakan form pencarian di atas untuk menemukan anggota")))),e.createElement("div",{className:"row mt-3 mb-5"},e.createElement("div",{className:"col-md-12"},e.createElement("div",{className:"card border-0 bg-light rounded"},e.createElement("div",{className:"card-body py-2"},e.createElement("h6",{className:"mb-2"},e.createElement("i",{className:"fas fa-info-circle me-2 text-primary"}),"Keterangan Status:"),e.createElement("div",{className:"row"},e.createElement("div",{className:"col-md-4 mb-1"},e.createElement("span",{className:"custom-badge-lunas me-1"},e.createElement("i",{className:"fas fa-check"})),e.createElement("small",{className:"fw-semibold"},"Lunas (Tahun)")),e.createElement("div",{className:"col-md-4 mb-1"},e.createElement("span",{className:"custom-badge-nonaktif me-1"},e.createElement("i",{className:"fas fa-times"})),e.createElement("small",{className:"fw-semibold"},"Non Aktif SIP")),e.createElement("div",{className:"col-md-4 mb-1"},e.createElement("span",{className:"custom-badge-belumbayar me-1"},e.createElement("i",{className:"fas fa-exclamation"})),e.createElement("small",{className:"fw-semibold"},"Belum Bayar"))),e.createElement("div",{className:"row mt-1"},e.createElement("div",{className:"col-12"},e.createElement("small",{className:"text-muted"},e.createElement("i",null,"Angka pada badge hijau menunjukkan tahun iuran yang sudah dibayar"))))))))))))))}export{K as default};
