import{u as y,R as e,H as k,L as b}from"./app.58e91cd6.js";import{L as v}from"./Account.29882ea7.js";import{P as D}from"./Pagination.0c34c62d.js";import{S as P}from"./Search.2689c5f3.js";import"./Dropdown.9f4f85bc.js";function S(){const{verif:m,biodata:t}=y().props;console.log("=== DEBUG DATA ==="),console.log("Biodata:",t),console.log("Biodata role:",t==null?void 0:t.role),console.log("Verif data:",m.data),console.log("===================");const p=a=>{switch(a){case"setujui":return e.createElement("span",{className:"badge bg-success px-3 py-2"},e.createElement("i",{className:"fas fa-check-circle me-1"}),"Disetujui");case"tolak":case"ditolak":return e.createElement("span",{className:"badge bg-danger px-3 py-2"},e.createElement("i",{className:"fas fa-times me-1"}),"Ditolak");case"revisi":return e.createElement("span",{className:"badge bg-warning text-dark px-3 py-2"},e.createElement("i",{className:"fas fa-edit me-1"}),"Perlu Revisi");case"ditunda":return e.createElement("span",{className:"badge bg-secondary px-3 py-2"},e.createElement("i",{className:"fas fa-clock me-1"}),"Ditunda");case"dikirim":return e.createElement("span",{className:"badge bg-info px-3 py-2"},e.createElement("i",{className:"fas fa-paper-plane me-1"}),"Terkirim");case"selesai":return e.createElement("span",{className:"badge bg-success px-3 py-2"},e.createElement("i",{className:"fas fa-check-double me-1"}),"Selesai");case"belum":default:return e.createElement("span",{className:"badge bg-primary px-3 py-2"},e.createElement("i",{className:"fas fa-hourglass-half me-1"}),"Menunggu Verifikasi")}},N=a=>{switch(a){case"setujui":return"Pengajuan telah disetujui";case"tolak":case"ditolak":return"Pengajuan ditolak";case"revisi":return"Perlu perbaikan data";case"ditunda":return"Ditunda untuk perbaikan";case"dikirim":return"Disetujui dan dikirim ke tujuan";case"selesai":return"Mutasi telah selesai";case"belum":default:return"Menunggu proses verifikasi"}},E=a=>{switch(a){case"dpw":return e.createElement("span",{className:"badge bg-primary px-3 py-2"},e.createElement("i",{className:"fas fa-map-marker-alt me-1"}),"Mutasi DPW");case"dpc":return e.createElement("span",{className:"badge bg-info px-3 py-2"},e.createElement("i",{className:"fas fa-building me-1"}),"Mutasi DPC");default:return e.createElement("span",{className:"badge bg-secondary px-3 py-2"},e.createElement("i",{className:"fas fa-question me-1"}),"Tidak Diketahui")}},f=a=>{switch(a){case"dpw":return"Mutasi antar Daerah Provinsi";case"dpc":return"Mutasi antar Daerah Kabupaten/Kota";default:return"Tipe mutasi tidak diketahui"}},g=a=>{console.log("shouldShowVerifikasiButton check:",{id:a.id,name:a.name,role:t==null?void 0:t.role,tipe_pindah:a.tipe_pindah,province_id:a.province_id,biodata_province_id:t==null?void 0:t.province_id});const s=(t==null?void 0:t.role)||"dpw";if(console.log("User role used:",s),s==="dpw"){const l=a.tipe_pindah==="dpw";return console.log("DPW check - shouldShow:",l),l}else if(s==="dpc"){const l=a.tipe_pindah==="dpc"&&parseInt(a.province_id)===parseInt(t==null?void 0:t.province_id);return console.log("DPC check - shouldShow:",l),l}return console.log("No role matched - returning false"),!1},h=a=>{var s,l,n,r,i,d,u,o;return a.tipe_pindah==="dpw"?e.createElement("div",{className:"text-center"},e.createElement("div",{className:"d-flex align-items-center justify-content-center mb-2"},e.createElement("div",{className:"text-start"},e.createElement("small",{className:"text-muted d-block"},"DPW Asal"),e.createElement("div",{className:"fw-bold text-danger"},e.createElement("i",{className:"fas fa-map-marker-alt me-1"}),((s=a.province)==null?void 0:s.name)||"N/A"),e.createElement("small",{className:"text-muted"},e.createElement("i",{className:"fas fa-building me-1"}),((l=a.city)==null?void 0:l.name)||"N/A")),e.createElement("div",{className:"mx-3"},e.createElement("i",{className:"fas fa-arrow-right text-primary fa-lg"})),e.createElement("div",{className:"text-end"},e.createElement("small",{className:"text-muted d-block"},"DPW Tujuan"),e.createElement("div",{className:"fw-bold text-success"},e.createElement("i",{className:"fas fa-map-marker-alt me-1"}),((n=a.tujuan)==null?void 0:n.name)||"N/A"),e.createElement("small",{className:"text-muted"},e.createElement("i",{className:"fas fa-building me-1"}),((r=a.tujuan_dpc)==null?void 0:r.name)||"N/A"))),e.createElement("small",{className:"text-primary fw-semibold"},e.createElement("i",{className:"fas fa-sync-alt me-1"}),"Mutasi Antar Provinsi")):e.createElement("div",{className:"text-center"},e.createElement("div",{className:"d-flex align-items-center justify-content-center mb-2"},e.createElement("div",{className:"text-start"},e.createElement("small",{className:"text-muted d-block"},"DPC Asal"),e.createElement("div",{className:"fw-bold text-danger"},e.createElement("i",{className:"fas fa-building me-1"}),((i=a.city)==null?void 0:i.name)||"N/A"),e.createElement("small",{className:"text-muted"},e.createElement("i",{className:"fas fa-map-marker-alt me-1"}),((d=a.province)==null?void 0:d.name)||"N/A")),e.createElement("div",{className:"mx-3"},e.createElement("i",{className:"fas fa-arrow-right text-primary fa-lg"})),e.createElement("div",{className:"text-end"},e.createElement("small",{className:"text-muted d-block"},"DPC Tujuan"),e.createElement("div",{className:"fw-bold text-success"},e.createElement("i",{className:"fas fa-building me-1"}),((u=a.tujuan_dpc)==null?void 0:u.name)||"N/A"),e.createElement("small",{className:"text-muted"},e.createElement("i",{className:"fas fa-map-marker-alt me-1"}),((o=a.tujuan)==null?void 0:o.name)||"N/A"))),e.createElement("small",{className:"text-info fw-semibold"},e.createElement("i",{className:"fas fa-exchange-alt me-1"}),"Mutasi Antar Kabupaten/Kota"))},w=a=>{var s,l,n,r,i,d,u,o;return a.tipe_pindah==="dpw"?e.createElement("div",{className:"mb-3 p-3 bg-light rounded"},e.createElement("h6",{className:"fw-bold mb-3 text-center"},e.createElement("i",{className:"fas fa-map-marker-alt me-2 text-primary"}),"Mutasi DPW (Antar Provinsi)"),e.createElement("div",{className:"d-flex align-items-center justify-content-between"},e.createElement("div",{className:"text-center"},e.createElement("div",{className:"fw-bold text-danger small"},"DPW ASAL"),e.createElement("div",{className:"fw-semibold"},((s=a.province)==null?void 0:s.name)||"N/A"),e.createElement("small",{className:"text-muted"},((l=a.city)==null?void 0:l.name)||"N/A")),e.createElement("div",{className:"mx-2"},e.createElement("i",{className:"fas fa-arrow-right text-primary"})),e.createElement("div",{className:"text-center"},e.createElement("div",{className:"fw-bold text-success small"},"DPW TUJUAN"),e.createElement("div",{className:"fw-semibold"},((n=a.tujuan)==null?void 0:n.name)||"N/A"),e.createElement("small",{className:"text-muted"},((r=a.tujuan_dpc)==null?void 0:r.name)||"N/A")))):e.createElement("div",{className:"mb-3 p-3 bg-light rounded"},e.createElement("h6",{className:"fw-bold mb-3 text-center"},e.createElement("i",{className:"fas fa-building me-2 text-info"}),"Mutasi DPC (Antar Kabupaten/Kota)"),e.createElement("div",{className:"d-flex align-items-center justify-content-between"},e.createElement("div",{className:"text-center"},e.createElement("div",{className:"fw-bold text-danger small"},"DPC ASAL"),e.createElement("div",{className:"fw-semibold"},((i=a.city)==null?void 0:i.name)||"N/A"),e.createElement("small",{className:"text-muted"},"DPW: ",((d=a.province)==null?void 0:d.name)||"N/A")),e.createElement("div",{className:"mx-2"},e.createElement("i",{className:"fas fa-arrow-right text-primary"})),e.createElement("div",{className:"text-center"},e.createElement("div",{className:"fw-bold text-success small"},"DPC TUJUAN"),e.createElement("div",{className:"fw-semibold"},((u=a.tujuan_dpc)==null?void 0:u.name)||"N/A"),e.createElement("small",{className:"text-muted"},"DPW: ",((o=a.tujuan)==null?void 0:o.name)||"N/A"))))},x=a=>{const s=(t==null?void 0:t.role)||"dpw";return s==="dpw"&&a.tipe_pindah==="dpc"?"Verifikasi oleh DPC":s==="dpc"&&a.tipe_pindah==="dpw"?"Verifikasi oleh DPW":s==="dpc"&&a.tipe_pindah==="dpc"&&parseInt(a.province_id)!==parseInt(t==null?void 0:t.province_id)?"Bukan wilayah Anda":"Tidak dapat diverifikasi"},c=(t==null?void 0:t.role)||"dpw";return e.createElement(e.Fragment,null,e.createElement(k,null,e.createElement("title",null,"Verifikasi Pengajuan Mutasi - IKATWI")),e.createElement(v,null,e.createElement("div",{className:"container-fluid py-4"},e.createElement("div",{className:"row mb-4"},e.createElement("div",{className:"col-12"},e.createElement("div",{className:"card shadow-sm border-0"},e.createElement("div",{className:"card-body py-4"},e.createElement("div",{className:"row align-items-center"},e.createElement("div",{className:"col-md-8"},e.createElement("h4",{className:"mb-1 text-primary fw-bold"},e.createElement("i",{className:"fas fa-exchange-alt me-2"}),"Verifikasi Pengajuan Mutasi",c==="dpw"&&" - DPW",c==="dpc"&&" - DPC"),e.createElement("p",{className:"text-muted mb-0"},c==="dpw"&&"Kelola verifikasi mutasi antar provinsi (DPW)",c==="dpc"&&"Kelola verifikasi mutasi antar kabupaten/kota (DPC)"),e.createElement("small",{className:"text-info"},e.createElement("i",{className:"fas fa-info-circle me-1"}),"Role: ",c," | Province ID: ",t==null?void 0:t.province_id)),e.createElement("div",{className:"col-md-4 text-md-end"},e.createElement("div",{className:"bg-success rounded p-3 d-inline-block"},e.createElement("div",{className:"d-flex align-items-center"},e.createElement("i",{className:"fas fa-chart-bar text-white me-2"}),e.createElement("div",null,e.createElement("small",{className:"text-white d-block"},"Total Pengajuan"),e.createElement("span",{className:"fw-bold text-white h5 mb-0"},m.total)))))))))),e.createElement("div",{className:"row mb-4"},e.createElement("div",{className:"col-md-6"},e.createElement(P,{URL:"/account/verifPengajuanDpw"}))),e.createElement("div",{className:"row"},e.createElement("div",{className:"col-12"},e.createElement("div",{className:"card shadow-sm border-0 d-none d-lg-block"},e.createElement("div",{className:"card-body p-0"},e.createElement("div",{className:"table-responsive"},e.createElement("table",{className:"table table-hover align-middle mb-0"},e.createElement("thead",{className:"bg-primary text-white"},e.createElement("tr",null,e.createElement("th",{className:"ps-4 py-3 text-center",style:{width:"5%"}},"No."),e.createElement("th",{className:"py-3",style:{width:"18%"}},e.createElement("i",{className:"fas fa-user me-2"}),"Anggota"),e.createElement("th",{className:"py-3 text-center",style:{width:"15%"}},e.createElement("i",{className:"fas fa-tag me-2"}),"Tipe Mutasi"),e.createElement("th",{className:"py-3 text-center",style:{width:"25%"}},e.createElement("i",{className:"fas fa-route me-2"}),"Rute Mutasi"),e.createElement("th",{className:"py-3 text-center",style:{width:"15%"}},e.createElement("i",{className:"fas fa-info-circle me-2"}),"Status"),e.createElement("th",{className:"py-3 text-center",style:{width:"12%"}},e.createElement("i",{className:"fas fa-calendar me-2"}),"Tanggal"),e.createElement("th",{className:"pe-4 py-3 text-center",style:{width:"10%"}},e.createElement("i",{className:"fas fa-cogs me-2"}),"Aksi"))),e.createElement("tbody",null,m.data.length>0?m.data.map((a,s)=>{const l=g(a);return e.createElement("tr",{key:a.id,className:"border-bottom"},e.createElement("td",{className:"ps-4 text-center fw-bold text-primary"},++s+(m.current_page-1)*m.per_page),e.createElement("td",null,e.createElement("div",{className:"d-flex align-items-center"},e.createElement("div",{className:"bg-primary rounded-circle d-flex align-items-center justify-content-center me-3",style:{width:"45px",height:"45px"}},e.createElement("i",{className:"fas fa-user text-white"})),e.createElement("div",null,e.createElement("h6",{className:"mb-1 fw-semibold"},a.name),e.createElement("small",{className:"text-muted"},e.createElement("i",{className:"fas fa-id-card me-1"}),a.kta)))),e.createElement("td",{className:"text-center"},e.createElement("div",{className:"d-flex flex-column align-items-center"},E(a.tipe_pindah),e.createElement("small",{className:"text-muted mt-1"},f(a.tipe_pindah)))),e.createElement("td",null,h(a)),e.createElement("td",{className:"text-center"},e.createElement("div",{className:"d-flex flex-column align-items-center"},p(a.status),e.createElement("small",{className:"text-muted mt-1"},N(a.status)),a.keterangan_revisi&&e.createElement("small",{className:"text-warning mt-1"},e.createElement("i",{className:"fas fa-exclamation-triangle me-1"}),a.keterangan_revisi))),e.createElement("td",{className:"text-center"},e.createElement("div",{className:"fw-medium"},new Date(a.tgl_mutasi).toLocaleDateString("id-ID",{day:"2-digit",month:"short",year:"numeric"})),e.createElement("small",{className:"text-muted"},"Diajukan")),e.createElement("td",{className:"pe-4 text-center"},l?e.createElement(b,{href:`/account/verifPengajuanDpw/${a.id}/edit`,className:"btn btn-primary btn-sm rounded-pill px-3 py-2",title:"Proses Verifikasi"},e.createElement("i",{className:"fas fa-edit me-1"}),"Proses"):e.createElement("span",{className:"text-muted small"},x(a))))}):e.createElement("tr",null,e.createElement("td",{colSpan:"7",className:"text-center py-5"},e.createElement("div",{className:"py-4"},e.createElement("i",{className:"fas fa-inbox fa-3x text-muted mb-3"}),e.createElement("h5",{className:"text-muted"},"Tidak ada data pengajuan"),e.createElement("p",{className:"text-muted mb-0"},"Belum ada pengajuan mutasi yang perlu diverifikasi"))))))))),e.createElement("div",{className:"d-block d-lg-none"},m.data.length>0?m.data.map((a,s)=>{const l=g(a);return e.createElement("div",{key:a.id,className:"card shadow-sm border-0 mb-3"},e.createElement("div",{className:"card-body"},e.createElement("div",{className:"d-flex justify-content-between align-items-start mb-3"},e.createElement("div",{className:"d-flex align-items-center"},e.createElement("div",{className:"bg-primary rounded-circle d-flex align-items-center justify-content-center me-3",style:{width:"40px",height:"40px"}},e.createElement("i",{className:"fas fa-user text-white"})),e.createElement("div",null,e.createElement("h6",{className:"mb-0 fw-bold"},a.name),e.createElement("small",{className:"text-muted"},"KTA: ",a.kta))),e.createElement("span",{className:"badge bg-primary"},"#",++s+(m.current_page-1)*m.per_page)),e.createElement("div",{className:"mb-3 text-center"},E(a.tipe_pindah),e.createElement("p",{className:"text-muted small mt-1 mb-0"},f(a.tipe_pindah))),w(a),e.createElement("div",{className:"mb-3"},e.createElement("div",{className:"text-center mb-2"},p(a.status)),e.createElement("p",{className:"text-center text-muted small mb-2"},N(a.status)),a.keterangan_revisi&&e.createElement("div",{className:"alert alert-warning py-2 small mb-0"},e.createElement("i",{className:"fas fa-exclamation-triangle me-1"}),a.keterangan_revisi)),e.createElement("div",{className:"d-flex justify-content-between align-items-center pt-2 border-top"},e.createElement("small",{className:"text-muted"},e.createElement("i",{className:"fas fa-calendar me-1"}),new Date(a.tgl_mutasi).toLocaleDateString("id-ID")),l?e.createElement(b,{href:`/account/verifPengajuanDpw/${a.id}/edit`,className:"btn btn-primary btn-sm rounded-pill px-3"},e.createElement("i",{className:"fas fa-edit me-1"}),"Proses"):e.createElement("span",{className:"text-muted small text-end"},x(a)))))}):e.createElement("div",{className:"card shadow-sm border-0 text-center py-5"},e.createElement("div",{className:"card-body"},e.createElement("i",{className:"fas fa-inbox fa-3x text-muted mb-3"}),e.createElement("h5",{className:"text-muted"},"Tidak ada data pengajuan"),e.createElement("p",{className:"text-muted"},"Belum ada pengajuan mutasi yang perlu diverifikasi")))))),m.data.length>0&&e.createElement("div",{className:"row mt-4"},e.createElement("div",{className:"col-12"},e.createElement("div",{className:"d-flex justify-content-center"},e.createElement(D,{links:m.links,align:"center"})))))))}export{S as default};
