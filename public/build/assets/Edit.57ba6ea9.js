import{u as M,r as s,R as e,H as q,L,d as F}from"./app.2e49b7fb.js";import{L as R}from"./Account.c268802c.js";import{S as U}from"./sweetalert2.all.615ea86c.js";import"./Dropdown.ec82f672.js";function G(){const{errors:r,provinces:o,cities:i,pengajuan:l}=M().props,[k,B]=s.exports.useState(l.user_id),[v,_]=s.exports.useState(l.name),[g,j]=s.exports.useState(l.kta),[c,x]=s.exports.useState(l.province_id),[h,y]=s.exports.useState(l.city_id),[P,D]=s.exports.useState(l.tgl_mutasi),[w,C]=s.exports.useState(l.keterangan),[m,u]=s.exports.useState(l.tujuan_mutasi),[f,p]=s.exports.useState(l.dpc_mutasi),[n,E]=s.exports.useState(l.tipe_pindah||""),[T,d]=s.exports.useState([]);s.exports.useEffect(()=>{if(l.tipe_pindah)E(l.tipe_pindah);else{const a=m==c;E(a?"dpc":"dpw")}if(l.tipe_pindah==="dpw"&&m){const a=i.filter(t=>t.province_id==m);d(a)}else if(l.tipe_pindah==="dpc"){const a=i.filter(t=>t.province_id==c);d(a)}},[l,m,c,i]);const S=a=>{const t=a.target.value;E(t),t==="dpc"?(u(c),d(i.filter(N=>N.province_id==c))):(u(""),d([])),p("")},A=a=>{const t=a.target.value;if(u(t),t){const N=i.filter(K=>K.province_id==t);d(N)}else d([]);p("")},W=async a=>{a.preventDefault();const t={user_id:k,name:v,kta:g,province_id:c,city_id:h,tgl_mutasi:P,keterangan:w,tipe_pindah:n,_method:"PUT"};n==="dpw"?(t.tujuan_mutasi=m,t.dpc_mutasi=f):n==="dpc"&&(t.tujuan_mutasi=c,t.dpc_mutasi=f),F.Inertia.post(`/account/pengajuan/${l.id}`,t,{onSuccess:()=>{U.fire({title:"Success!",text:"Data Pengajuan Anda Berhasil di Update!",icon:"success",showConfirmButton:!1,timer:2500})}})},b=()=>{const a=o.find(t=>t.id==c);return a?a.name:"DPW Asal"},I=()=>{const a=o.find(t=>t.id==m);return a?a.name:"DPW Tujuan"};return e.createElement(e.Fragment,null,e.createElement(q,null,e.createElement("title",null,"Edit Pengajuan - IKATWI")),e.createElement(R,null,e.createElement("div",{className:"col-md-12 mt-2"},e.createElement("div",{className:"card border-0 shadow-sm"},e.createElement("div",{className:"card-header bg-primary text-white"},e.createElement("h5",{className:"card-title mb-0"},e.createElement("i",{className:"fas fa-edit me-2"}),"Edit Pengajuan Mutasi")),e.createElement("div",{className:"card-body"},e.createElement("form",{onSubmit:W},e.createElement("div",{className:"row mb-4"},e.createElement("div",{className:"col-12"},e.createElement("h6",{className:"text-primary mb-3 border-bottom pb-2"},e.createElement("i",{className:"fas fa-user me-2"}),"Data Diri")),e.createElement("div",{className:"col-md-6"},e.createElement("div",{className:"mb-3"},e.createElement("label",{className:"form-label fw-bold"},"Nama Lengkap"),e.createElement("input",{type:"text",className:"form-control bg-light",value:v,onChange:a=>_(a.target.value),disabled:!0}))),e.createElement("div",{className:"col-md-6"},e.createElement("div",{className:"mb-3"},e.createElement("label",{className:"form-label fw-bold"},"Nomor KTA"),e.createElement("input",{type:"text",className:"form-control bg-light",value:g,onChange:a=>j(a.target.value),disabled:!0})))),e.createElement("div",{className:"row mb-4"},e.createElement("div",{className:"col-12"},e.createElement("h6",{className:"text-primary mb-3 border-bottom pb-2"},e.createElement("i",{className:"fas fa-map-marker-alt me-2"}),"Asal Keanggotaan")),e.createElement("div",{className:"col-md-6"},e.createElement("div",{className:"mb-3"},e.createElement("label",{className:"form-label fw-bold"},"DPW Asal"),e.createElement("select",{className:"form-select bg-light",disabled:!0,value:c,onChange:a=>x(a.target.value)},e.createElement("option",{value:""},"-- Pilih DPW --"),o.map(a=>e.createElement("option",{value:a.id,key:a.id},a.name))))),e.createElement("div",{className:"col-md-6"},e.createElement("div",{className:"mb-3"},e.createElement("label",{className:"form-label fw-bold"},"DPC Asal"),e.createElement("select",{className:"form-select bg-light",disabled:!0,value:h,onChange:a=>y(a.target.value)},e.createElement("option",{value:""},"-- Pilih DPC --"),i.map(a=>e.createElement("option",{value:a.id,key:a.id},a.name)))))),e.createElement("div",{className:"row mb-4"},e.createElement("div",{className:"col-12"},e.createElement("h6",{className:"text-primary mb-3 border-bottom pb-2"},e.createElement("i",{className:"fas fa-file-alt me-2"}),"Data Mutasi")),e.createElement("div",{className:"col-md-6"},e.createElement("div",{className:"mb-3"},e.createElement("label",{className:"form-label fw-bold"},"Tipe Pindah ",e.createElement("span",{className:"text-danger"},"*")),e.createElement("select",{className:"form-select",value:n,onChange:S,required:!0},e.createElement("option",{value:""},"-- Pilih Tipe Pindah --"),e.createElement("option",{value:"dpw"},"Pindah DPW (Pindah Provinsi)"),e.createElement("option",{value:"dpc"},"Pindah DPC (Pindah Kabupaten/Kota dalam Provinsi yang sama)")),r.tipe_pindah&&e.createElement("div",{className:"alert alert-danger mt-2"},r.tipe_pindah))),e.createElement("div",{className:"col-md-6"},e.createElement("div",{className:"mb-3"},e.createElement("label",{className:"form-label fw-bold"},"Tanggal Mutasi ",e.createElement("span",{className:"text-danger"},"*")),e.createElement("input",{type:"date",className:"form-control",value:P,onChange:a=>D(a.target.value),placeholder:"Pilih Tanggal Mutasi",required:!0}),r.tgl_mutasi&&e.createElement("div",{className:"alert alert-danger mt-2"},r.tgl_mutasi)))),e.createElement("div",{className:"row mb-4"},e.createElement("div",{className:"col-12"},e.createElement("h6",{className:"text-primary mb-3 border-bottom pb-2"},e.createElement("i",{className:"fas fa-location-arrow me-2"}),"Tujuan Mutasi")),(n==="dpw"||n==="dpc")&&e.createElement("div",{className:"col-md-6"},e.createElement("div",{className:"mb-3"},e.createElement("label",{className:"form-label fw-bold"},n==="dpw"?"Tujuan DPW":"DPW"," ",e.createElement("span",{className:"text-danger"},"*")),n==="dpw"?e.createElement("select",{className:"form-select",value:m,onChange:A,required:!0},e.createElement("option",{value:""},"-- Pilih Tujuan DPW --"),o.map(a=>e.createElement("option",{value:a.id,key:a.id},a.name))):e.createElement("input",{type:"text",className:"form-control bg-light",value:b(),disabled:!0}),r.tujuan_mutasi&&e.createElement("div",{className:"alert alert-danger mt-2"},r.tujuan_mutasi))),(n==="dpw"||n==="dpc")&&e.createElement("div",{className:"col-md-6"},e.createElement("div",{className:"mb-3"},e.createElement("label",{className:"form-label fw-bold"},"Tujuan DPC ",e.createElement("span",{className:"text-danger"},"*")),e.createElement("select",{className:"form-select",value:f,onChange:a=>p(a.target.value),required:!0,disabled:n==="dpw"&&!m},e.createElement("option",{value:""},n==="dpw"&&!m?"-- Pilih DPW terlebih dahulu --":"-- Pilih Tujuan DPC --"),T.map(a=>e.createElement("option",{value:a.id,key:a.id},a.name))),n==="dpw"&&!m&&e.createElement("div",{className:"form-text text-warning"},"Pilih DPW tujuan terlebih dahulu untuk melihat DPC yang tersedia"),r.dpc_mutasi&&e.createElement("div",{className:"alert alert-danger mt-2"},r.dpc_mutasi))),n==="dpc"&&e.createElement("div",{className:"col-12"},e.createElement("div",{className:"alert alert-info"},e.createElement("i",{className:"fas fa-info-circle me-2"}),e.createElement("strong",null,"Informasi:")," Anda melakukan mutasi DPC dalam Provinsi ",e.createElement("strong",null,b()),". Tujuan DPW akan tetap di ",e.createElement("strong",null,b()),".")),n==="dpw"&&m&&e.createElement("div",{className:"col-12"},e.createElement("div",{className:"alert alert-info"},e.createElement("i",{className:"fas fa-info-circle me-2"}),e.createElement("strong",null,"Informasi:")," Anda melakukan mutasi ke Provinsi ",e.createElement("strong",null,I()),". Pilih DPC tujuan di provinsi tersebut.")),e.createElement("div",{className:"col-12"},e.createElement("div",{className:"alert alert-light border mt-2"},e.createElement("small",null,e.createElement("i",{className:"fas fa-info-circle me-2"}),n==="dpw"?"Pindah DPW: Anda akan pindah ke provinsi lain. Pilih tujuan DPW dan DPC.":n==="dpc"?"Pindah DPC: Anda akan pindah ke kabupaten/kota lain dalam provinsi yang sama.":"Pilih tipe pindah terlebih dahulu.")))),e.createElement("div",{className:"row mb-4"},e.createElement("div",{className:"col-12"},e.createElement("h6",{className:"text-primary mb-3 border-bottom pb-2"},e.createElement("i",{className:"fas fa-sticky-note me-2"}),"Keterangan")),e.createElement("div",{className:"col-12"},e.createElement("div",{className:"mb-3"},e.createElement("label",{className:"form-label fw-bold"},"Alasan Mutasi ",e.createElement("span",{className:"text-danger"},"*")),e.createElement("textarea",{className:"form-control",rows:"4",value:w,onChange:a=>C(a.target.value),placeholder:"Contoh: Mutasi karena pindah tempat kerja, pindah domisili, atau alasan lainnya...",required:!0}),e.createElement("div",{className:"form-text"},"Jelaskan alasan Anda melakukan mutasi dengan jelas."),r.keterangan&&e.createElement("div",{className:"alert alert-danger mt-2"},r.keterangan)))),e.createElement("div",{className:"row mb-4"},e.createElement("div",{className:"col-12"},e.createElement("div",{className:"card border-warning"},e.createElement("div",{className:"card-body"},e.createElement("div",{className:"form-check"},e.createElement("input",{className:"form-check-input",type:"checkbox",required:!0,id:"confirmationCheck"}),e.createElement("label",{className:"form-check-label fw-bold text-warning",htmlFor:"confirmationCheck"},e.createElement("i",{className:"fas fa-exclamation-triangle me-2"}),"Saya menyatakan bahwa data yang saya inputkan adalah benar dan sesuai. Saya bertanggung jawab penuh atas kebenaran data mutasi ini.")))))),e.createElement("div",{className:"row mt-4"},e.createElement("div",{className:"col-12"},e.createElement("div",{className:"d-flex gap-2 justify-content-end"},e.createElement(L,{href:"/account/pengajuan",className:"btn btn-secondary"},e.createElement("i",{className:"fas fa-arrow-left me-2"}),"Kembali"),e.createElement("button",{type:"reset",className:"btn btn-warning",onClick:()=>{if(E(l.tipe_pindah||""),u(l.tujuan_mutasi),p(l.dpc_mutasi),l.tipe_pindah==="dpw"&&l.tujuan_mutasi){const a=i.filter(t=>t.province_id==l.tujuan_mutasi);d(a)}else if(l.tipe_pindah==="dpc"){const a=i.filter(t=>t.province_id==c);d(a)}}},e.createElement("i",{className:"fas fa-redo me-2"}),"Reset"),e.createElement("button",{type:"submit",className:"btn btn-success"},e.createElement("i",{className:"fas fa-save me-2"}),"Update Pengajuan"))))))))))}export{G as default};
