import{u as U,r as s,R as e,H as V,L as z,d as G}from"./app.7086c886.js";import{L as O}from"./Account.5faab1d3.js";import{S as Q}from"./sweetalert2.all.f053e87a.js";import"./Dropdown.fffc05dd.js";function ae(){const{errors:n,transactions:j,statusAnggota:C,biodata:c,provinces:d,cities:E}=U().props,S=j.map(a=>a.status);s.exports.useState(C.status_anggota),S.toString().replace("[","").replace("]","").replace('"',"").replace('"',"");const[T,X]=s.exports.useState(c.id),[h,_]=s.exports.useState(c.name),[P,A]=s.exports.useState(c.no_anggota),[r,W]=s.exports.useState(c.province_id),[w,I]=s.exports.useState(c.city_id),[b,M]=s.exports.useState(""),[N,K]=s.exports.useState(""),[m,u]=s.exports.useState(""),[i,p]=s.exports.useState(""),[t,k]=s.exports.useState(""),[F,o]=s.exports.useState([]),[x,y]=s.exports.useState(!1),[f,D]=s.exports.useState(!1),L=a=>{const l=a.target.value;k(l),l==="dpc"?(u(r),o(E.filter(v=>v.province_id==r))):(u(""),o([])),p("")},q=a=>{const l=a.target.value;if(u(l),l){const v=E.filter(J=>J.province_id==l);o(v)}else o([]);p("")},R=async a=>{a.preventDefault(),D(!0);const l={user_id:T,name:h,kta:P,province_id:r,city_id:w,tgl_mutasi:b,keterangan:N,tipe_pindah:t};t==="dpw"?(l.tujuan_mutasi=m,l.dpc_mutasi=i):t==="dpc"&&(l.tujuan_mutasi=r,l.dpc_mutasi=i),G.Inertia.post("/account/pengajuan",l,{onSuccess:()=>{Q.fire({title:"Success!",text:"Data Pengajuan Anda Sudah Terkirim!",icon:"success",showConfirmButton:!1,timer:2500})},onFinish:()=>{D(!1)}})},g=()=>{const a=d.find(l=>l.id==r);return a?a.name:"DPW Asal"},H=()=>{const a=d.find(l=>l.id==m);return a?a.name:"DPW Tujuan"},B=()=>b&&N&&t&&(t==="dpw"&&m&&i||t==="dpc"&&i)&&x;return e.createElement(e.Fragment,null,e.createElement(V,null,e.createElement("title",null,"User Pengajuan Mutasi - IKATWI")),e.createElement(O,null,e.createElement("div",{className:"col-md-12 mt-2"},e.createElement("div",{className:"card border-0 shadow-sm"},e.createElement("div",{className:"card-header bg-primary text-white"},e.createElement("h5",{className:"card-title mb-0"},e.createElement("i",{className:"fas fa-exchange-alt me-2"}),"Form Pengajuan Mutasi")),e.createElement("div",{className:"card-body"},e.createElement("form",{onSubmit:R},e.createElement("div",{className:"row mb-4"},e.createElement("div",{className:"col-12"},e.createElement("h6",{className:"text-primary mb-3 border-bottom pb-2"},e.createElement("i",{className:"fas fa-user me-2"}),"Data Diri")),e.createElement("div",{className:"col-md-6"},e.createElement("div",{className:"mb-3"},e.createElement("label",{className:"form-label fw-bold"},"Nama Lengkap"),e.createElement("input",{type:"text",className:"form-control bg-light",value:h,onChange:a=>_(a.target.value),disabled:!0}))),e.createElement("div",{className:"col-md-6"},e.createElement("div",{className:"mb-3"},e.createElement("label",{className:"form-label fw-bold"},"Nomor KTA"),e.createElement("input",{type:"text",className:"form-control bg-light",value:P,onChange:a=>A(a.target.value),disabled:!0})))),e.createElement("div",{className:"row mb-4"},e.createElement("div",{className:"col-12"},e.createElement("h6",{className:"text-primary mb-3 border-bottom pb-2"},e.createElement("i",{className:"fas fa-map-marker-alt me-2"}),"Asal Keanggotaan")),e.createElement("div",{className:"col-md-6"},e.createElement("div",{className:"mb-3"},e.createElement("label",{className:"form-label fw-bold"},"DPW Asal"),e.createElement("select",{className:"form-select bg-light",disabled:!0,value:r,onChange:a=>W(a.target.value)},e.createElement("option",{value:""},"-- Pilih DPW --"),d.map(a=>e.createElement("option",{value:a.id,key:a.id},a.name))))),e.createElement("div",{className:"col-md-6"},e.createElement("div",{className:"mb-3"},e.createElement("label",{className:"form-label fw-bold"},"DPC Asal"),e.createElement("select",{className:"form-select bg-light",disabled:!0,value:w,onChange:a=>I(a.target.value)},e.createElement("option",{value:""},"-- Pilih DPC --"),E.map(a=>e.createElement("option",{value:a.id,key:a.id},a.name)))))),e.createElement("div",{className:"row mb-4"},e.createElement("div",{className:"col-12"},e.createElement("h6",{className:"text-primary mb-3 border-bottom pb-2"},e.createElement("i",{className:"fas fa-file-alt me-2"}),"Data Mutasi")),e.createElement("div",{className:"col-md-6"},e.createElement("div",{className:"mb-3"},e.createElement("label",{className:"form-label fw-bold"},"Tipe Pindah ",e.createElement("span",{className:"text-danger"},"*")),e.createElement("select",{className:"form-select",value:t,onChange:L,required:!0},e.createElement("option",{value:""},"-- Pilih Tipe Pindah --"),e.createElement("option",{value:"dpw"},"Pindah DPW (Pindah Provinsi)"),e.createElement("option",{value:"dpc"},"Pindah DPC (Pindah Kabupaten/Kota dalam Provinsi yang sama)")),n.tipe_pindah&&e.createElement("div",{className:"alert alert-danger mt-2"},n.tipe_pindah))),e.createElement("div",{className:"col-md-6"},e.createElement("div",{className:"mb-3"},e.createElement("label",{className:"form-label fw-bold"},"Tanggal Mutasi ",e.createElement("span",{className:"text-danger"},"*")),e.createElement("input",{type:"date",className:"form-control",value:b,onChange:a=>M(a.target.value),placeholder:"Pilih Tanggal Mutasi",required:!0}),n.tgl_mutasi&&e.createElement("div",{className:"alert alert-danger mt-2"},n.tgl_mutasi)))),e.createElement("div",{className:"row mb-4"},e.createElement("div",{className:"col-12"},e.createElement("h6",{className:"text-primary mb-3 border-bottom pb-2"},e.createElement("i",{className:"fas fa-location-arrow me-2"}),"Tujuan Mutasi")),(t==="dpw"||t==="dpc")&&e.createElement("div",{className:"col-md-6"},e.createElement("div",{className:"mb-3"},e.createElement("label",{className:"form-label fw-bold"},t==="dpw"?"Tujuan DPW":"DPW"," ",e.createElement("span",{className:"text-danger"},"*")),t==="dpw"?e.createElement("select",{className:"form-select",value:m,onChange:q,required:!0},e.createElement("option",{value:""},"-- Pilih Tujuan DPW --"),d.map(a=>e.createElement("option",{value:a.id,key:a.id},a.name))):e.createElement("input",{type:"text",className:"form-control bg-light",value:g(),disabled:!0}),n.tujuan_mutasi&&e.createElement("div",{className:"alert alert-danger mt-2"},n.tujuan_mutasi))),(t==="dpw"||t==="dpc")&&e.createElement("div",{className:"col-md-6"},e.createElement("div",{className:"mb-3"},e.createElement("label",{className:"form-label fw-bold"},"Tujuan DPC ",e.createElement("span",{className:"text-danger"},"*")),e.createElement("select",{className:"form-select",value:i,onChange:a=>p(a.target.value),required:!0,disabled:t==="dpw"&&!m},e.createElement("option",{value:""},t==="dpw"&&!m?"-- Pilih DPW terlebih dahulu --":"-- Pilih Tujuan DPC --"),F.map(a=>e.createElement("option",{value:a.id,key:a.id},a.name))),t==="dpw"&&!m&&e.createElement("div",{className:"form-text text-warning"},"Pilih DPW tujuan terlebih dahulu untuk melihat DPC yang tersedia"),n.dpc_mutasi&&e.createElement("div",{className:"alert alert-danger mt-2"},n.dpc_mutasi))),t==="dpc"&&e.createElement("div",{className:"col-12"},e.createElement("div",{className:"alert alert-info"},e.createElement("i",{className:"fas fa-info-circle me-2"}),e.createElement("strong",null,"Informasi:")," Anda melakukan mutasi DPC dalam Provinsi ",e.createElement("strong",null,g()),". Tujuan DPW akan tetap di ",e.createElement("strong",null,g()),".")),t==="dpw"&&m&&e.createElement("div",{className:"col-12"},e.createElement("div",{className:"alert alert-info"},e.createElement("i",{className:"fas fa-info-circle me-2"}),e.createElement("strong",null,"Informasi:")," Anda melakukan mutasi ke Provinsi ",e.createElement("strong",null,H()),". Pilih DPC tujuan di provinsi tersebut.")),e.createElement("div",{className:"col-12"},e.createElement("div",{className:"alert alert-light border mt-2"},e.createElement("small",null,e.createElement("i",{className:"fas fa-info-circle me-2"}),t==="dpw"?"Pindah DPW: Anda akan pindah ke provinsi lain. Pilih tujuan DPW dan DPC.":t==="dpc"?"Pindah DPC: Anda akan pindah ke kabupaten/kota lain dalam provinsi yang sama.":"Pilih tipe pindah terlebih dahulu.")))),e.createElement("div",{className:"row mb-4"},e.createElement("div",{className:"col-12"},e.createElement("h6",{className:"text-primary mb-3 border-bottom pb-2"},e.createElement("i",{className:"fas fa-sticky-note me-2"}),"Keterangan")),e.createElement("div",{className:"col-12"},e.createElement("div",{className:"mb-3"},e.createElement("label",{className:"form-label fw-bold"},"Alasan Mutasi ",e.createElement("span",{className:"text-danger"},"*")),e.createElement("textarea",{className:"form-control",rows:"4",value:N,onChange:a=>K(a.target.value),placeholder:"Contoh: Mutasi karena pindah tempat kerja, pindah domisili, atau alasan lainnya...",required:!0}),e.createElement("div",{className:"form-text"},"Jelaskan alasan Anda melakukan mutasi dengan jelas."),n.keterangan&&e.createElement("div",{className:"alert alert-danger mt-2"},n.keterangan)))),e.createElement("div",{className:"row mb-4"},e.createElement("div",{className:"col-12"},e.createElement("div",{className:"card border-warning"},e.createElement("div",{className:"card-body"},e.createElement("div",{className:"form-check"},e.createElement("input",{className:"form-check-input",type:"checkbox",required:!0,id:"confirmationCheck",checked:x,onChange:a=>y(a.target.checked)}),e.createElement("label",{className:"form-check-label fw-bold text-warning",htmlFor:"confirmationCheck"},e.createElement("i",{className:"fas fa-exclamation-triangle me-2"}),"Saya menyatakan bahwa data yang saya inputkan adalah benar dan sesuai. Saya bertanggung jawab penuh atas kebenaran data mutasi ini.")))))),e.createElement("div",{className:"row mt-4"},e.createElement("div",{className:"col-12"},e.createElement("div",{className:"d-flex gap-2 justify-content-end"},e.createElement(z,{href:"/account/pengajuan",className:"btn btn-secondary"},e.createElement("i",{className:"fas fa-arrow-left me-2"}),"Kembali"),e.createElement("button",{type:"reset",className:"btn btn-warning",onClick:()=>{k(""),u(""),p(""),o([]),y(!1)},disabled:f},e.createElement("i",{className:"fas fa-redo me-2"}),"Reset"),e.createElement("button",{type:"submit",className:"btn btn-success",disabled:!B()||f},f?e.createElement(e.Fragment,null,e.createElement("i",{className:"fas fa-spinner fa-spin me-2"}),"Memproses..."):e.createElement(e.Fragment,null,e.createElement("i",{className:"fas fa-paper-plane me-2"}),"Ajukan Mutasi")))))))))))}export{ae as default};
