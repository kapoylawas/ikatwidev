import{u as F,r as n,R as e,H as R,L as H,d as B}from"./app.4042e15c.js";import{L as J}from"./Account.02056a37.js";import{S as U}from"./sweetalert2.all.ec62c549.js";import"./Dropdown.d6b0e181.js";function X(){const{errors:s,transactions:k,statusAnggota:x,biodata:c,provinces:o,cities:p}=F().props,y=k.map(a=>a.status);n.exports.useState(x.status_anggota),y.toString().replace("[","").replace("]","").replace('"',"").replace('"',"");const[D,z]=n.exports.useState(c.id),[g,j]=n.exports.useState(c.name),[f,C]=n.exports.useState(c.no_anggota),[r,T]=n.exports.useState(c.province_id),[v,_]=n.exports.useState(c.city_id),[h,S]=n.exports.useState(""),[P,A]=n.exports.useState(""),[m,d]=n.exports.useState(""),[E,u]=n.exports.useState(""),[t,w]=n.exports.useState(""),[W,i]=n.exports.useState([]),I=a=>{const l=a.target.value;w(l),l==="dpc"?(d(r),i(p.filter(N=>N.province_id==r))):(d(""),i([])),u("")},K=a=>{const l=a.target.value;if(d(l),l){const N=p.filter(L=>L.province_id==l);i(N)}else i([]);u("")},M=async a=>{a.preventDefault();const l={user_id:D,name:g,kta:f,province_id:r,city_id:v,tgl_mutasi:h,keterangan:P,tipe_pindah:t};t==="dpw"?(l.tujuan_mutasi=m,l.dpc_mutasi=E):t==="dpc"&&(l.tujuan_mutasi=r,l.dpc_mutasi=E),B.Inertia.post("/account/pengajuan",l,{onSuccess:()=>{U.fire({title:"Success!",text:"Data Pengajuan Anda Sudah Terkirim!",icon:"success",showConfirmButton:!1,timer:2500})}})},b=()=>{const a=o.find(l=>l.id==r);return a?a.name:"DPW Asal"},q=()=>{const a=o.find(l=>l.id==m);return a?a.name:"DPW Tujuan"};return e.createElement(e.Fragment,null,e.createElement(R,null,e.createElement("title",null,"User Pengajuan Mutasi - IKATWI")),e.createElement(J,null,e.createElement("div",{className:"col-md-12 mt-2"},e.createElement("div",{className:"card border-0 shadow-sm"},e.createElement("div",{className:"card-header bg-primary text-white"},e.createElement("h5",{className:"card-title mb-0"},e.createElement("i",{className:"fas fa-exchange-alt me-2"}),"Form Pengajuan Mutasi")),e.createElement("div",{className:"card-body"},e.createElement("form",{onSubmit:M},e.createElement("div",{className:"row mb-4"},e.createElement("div",{className:"col-12"},e.createElement("h6",{className:"text-primary mb-3 border-bottom pb-2"},e.createElement("i",{className:"fas fa-user me-2"}),"Data Diri")),e.createElement("div",{className:"col-md-6"},e.createElement("div",{className:"mb-3"},e.createElement("label",{className:"form-label fw-bold"},"Nama Lengkap"),e.createElement("input",{type:"text",className:"form-control bg-light",value:g,onChange:a=>j(a.target.value),disabled:!0}))),e.createElement("div",{className:"col-md-6"},e.createElement("div",{className:"mb-3"},e.createElement("label",{className:"form-label fw-bold"},"Nomor KTA"),e.createElement("input",{type:"text",className:"form-control bg-light",value:f,onChange:a=>C(a.target.value),disabled:!0})))),e.createElement("div",{className:"row mb-4"},e.createElement("div",{className:"col-12"},e.createElement("h6",{className:"text-primary mb-3 border-bottom pb-2"},e.createElement("i",{className:"fas fa-map-marker-alt me-2"}),"Asal Keanggotaan")),e.createElement("div",{className:"col-md-6"},e.createElement("div",{className:"mb-3"},e.createElement("label",{className:"form-label fw-bold"},"DPW Asal"),e.createElement("select",{className:"form-select bg-light",disabled:!0,value:r,onChange:a=>T(a.target.value)},e.createElement("option",{value:""},"-- Pilih DPW --"),o.map(a=>e.createElement("option",{value:a.id,key:a.id},a.name))))),e.createElement("div",{className:"col-md-6"},e.createElement("div",{className:"mb-3"},e.createElement("label",{className:"form-label fw-bold"},"DPC Asal"),e.createElement("select",{className:"form-select bg-light",disabled:!0,value:v,onChange:a=>_(a.target.value)},e.createElement("option",{value:""},"-- Pilih DPC --"),p.map(a=>e.createElement("option",{value:a.id,key:a.id},a.name)))))),e.createElement("div",{className:"row mb-4"},e.createElement("div",{className:"col-12"},e.createElement("h6",{className:"text-primary mb-3 border-bottom pb-2"},e.createElement("i",{className:"fas fa-file-alt me-2"}),"Data Mutasi")),e.createElement("div",{className:"col-md-6"},e.createElement("div",{className:"mb-3"},e.createElement("label",{className:"form-label fw-bold"},"Tipe Pindah ",e.createElement("span",{className:"text-danger"},"*")),e.createElement("select",{className:"form-select",value:t,onChange:I,required:!0},e.createElement("option",{value:""},"-- Pilih Tipe Pindah --"),e.createElement("option",{value:"dpw"},"Pindah DPW (Pindah Provinsi)"),e.createElement("option",{value:"dpc"},"Pindah DPC (Pindah Kabupaten/Kota dalam Provinsi yang sama)")),s.tipe_pindah&&e.createElement("div",{className:"alert alert-danger mt-2"},s.tipe_pindah))),e.createElement("div",{className:"col-md-6"},e.createElement("div",{className:"mb-3"},e.createElement("label",{className:"form-label fw-bold"},"Tanggal Mutasi ",e.createElement("span",{className:"text-danger"},"*")),e.createElement("input",{type:"date",className:"form-control",value:h,onChange:a=>S(a.target.value),placeholder:"Pilih Tanggal Mutasi",required:!0}),s.tgl_mutasi&&e.createElement("div",{className:"alert alert-danger mt-2"},s.tgl_mutasi)))),e.createElement("div",{className:"row mb-4"},e.createElement("div",{className:"col-12"},e.createElement("h6",{className:"text-primary mb-3 border-bottom pb-2"},e.createElement("i",{className:"fas fa-location-arrow me-2"}),"Tujuan Mutasi")),(t==="dpw"||t==="dpc")&&e.createElement("div",{className:"col-md-6"},e.createElement("div",{className:"mb-3"},e.createElement("label",{className:"form-label fw-bold"},t==="dpw"?"Tujuan DPW":"DPW"," ",e.createElement("span",{className:"text-danger"},"*")),t==="dpw"?e.createElement("select",{className:"form-select",value:m,onChange:K,required:!0},e.createElement("option",{value:""},"-- Pilih Tujuan DPW --"),o.map(a=>e.createElement("option",{value:a.id,key:a.id},a.name))):e.createElement("input",{type:"text",className:"form-control bg-light",value:b(),disabled:!0}),s.tujuan_mutasi&&e.createElement("div",{className:"alert alert-danger mt-2"},s.tujuan_mutasi))),(t==="dpw"||t==="dpc")&&e.createElement("div",{className:"col-md-6"},e.createElement("div",{className:"mb-3"},e.createElement("label",{className:"form-label fw-bold"},"Tujuan DPC ",e.createElement("span",{className:"text-danger"},"*")),e.createElement("select",{className:"form-select",value:E,onChange:a=>u(a.target.value),required:!0,disabled:t==="dpw"&&!m},e.createElement("option",{value:""},t==="dpw"&&!m?"-- Pilih DPW terlebih dahulu --":"-- Pilih Tujuan DPC --"),W.map(a=>e.createElement("option",{value:a.id,key:a.id},a.name))),t==="dpw"&&!m&&e.createElement("div",{className:"form-text text-warning"},"Pilih DPW tujuan terlebih dahulu untuk melihat DPC yang tersedia"),s.dpc_mutasi&&e.createElement("div",{className:"alert alert-danger mt-2"},s.dpc_mutasi))),t==="dpc"&&e.createElement("div",{className:"col-12"},e.createElement("div",{className:"alert alert-info"},e.createElement("i",{className:"fas fa-info-circle me-2"}),e.createElement("strong",null,"Informasi:")," Anda melakukan mutasi DPC dalam Provinsi ",e.createElement("strong",null,b()),". Tujuan DPW akan tetap di ",e.createElement("strong",null,b()),".")),t==="dpw"&&m&&e.createElement("div",{className:"col-12"},e.createElement("div",{className:"alert alert-info"},e.createElement("i",{className:"fas fa-info-circle me-2"}),e.createElement("strong",null,"Informasi:")," Anda melakukan mutasi ke Provinsi ",e.createElement("strong",null,q()),". Pilih DPC tujuan di provinsi tersebut.")),e.createElement("div",{className:"col-12"},e.createElement("div",{className:"alert alert-light border mt-2"},e.createElement("small",null,e.createElement("i",{className:"fas fa-info-circle me-2"}),t==="dpw"?"Pindah DPW: Anda akan pindah ke provinsi lain. Pilih tujuan DPW dan DPC.":t==="dpc"?"Pindah DPC: Anda akan pindah ke kabupaten/kota lain dalam provinsi yang sama.":"Pilih tipe pindah terlebih dahulu.")))),e.createElement("div",{className:"row mb-4"},e.createElement("div",{className:"col-12"},e.createElement("h6",{className:"text-primary mb-3 border-bottom pb-2"},e.createElement("i",{className:"fas fa-sticky-note me-2"}),"Keterangan")),e.createElement("div",{className:"col-12"},e.createElement("div",{className:"mb-3"},e.createElement("label",{className:"form-label fw-bold"},"Alasan Mutasi ",e.createElement("span",{className:"text-danger"},"*")),e.createElement("textarea",{className:"form-control",rows:"4",value:P,onChange:a=>A(a.target.value),placeholder:"Contoh: Mutasi karena pindah tempat kerja, pindah domisili, atau alasan lainnya...",required:!0}),e.createElement("div",{className:"form-text"},"Jelaskan alasan Anda melakukan mutasi dengan jelas."),s.keterangan&&e.createElement("div",{className:"alert alert-danger mt-2"},s.keterangan)))),e.createElement("div",{className:"row mb-4"},e.createElement("div",{className:"col-12"},e.createElement("div",{className:"card border-warning"},e.createElement("div",{className:"card-body"},e.createElement("div",{className:"form-check"},e.createElement("input",{className:"form-check-input",type:"checkbox",required:!0,id:"confirmationCheck"}),e.createElement("label",{className:"form-check-label fw-bold text-warning",htmlFor:"confirmationCheck"},e.createElement("i",{className:"fas fa-exclamation-triangle me-2"}),"Saya menyatakan bahwa data yang saya inputkan adalah benar dan sesuai. Saya bertanggung jawab penuh atas kebenaran data mutasi ini.")))))),e.createElement("div",{className:"row mt-4"},e.createElement("div",{className:"col-12"},e.createElement("div",{className:"d-flex gap-2 justify-content-end"},e.createElement(H,{href:"/account/pengajuan",className:"btn btn-secondary"},e.createElement("i",{className:"fas fa-arrow-left me-2"}),"Kembali"),e.createElement("button",{type:"reset",className:"btn btn-warning",onClick:()=>{w(""),d(""),u(""),i([])}},e.createElement("i",{className:"fas fa-redo me-2"}),"Reset"),e.createElement("button",{type:"submit",className:"btn btn-success"},e.createElement("i",{className:"fas fa-paper-plane me-2"}),"Ajukan Mutasi"))))))))))}export{X as default};
