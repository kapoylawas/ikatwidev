import{u as j,r as i,R as e,H as D,L as d}from"./app.b54fe5ae.js";import{L as A}from"./Account.388ca4a2.js";import{P as S}from"./Pagination.431f5352.js";import{D as I}from"./Delete.d968ce4e.js";import"./Dropdown.b9fdcd7b.js";import"./sweetalert2.all.2189b67c.js";function H(){const{transactions:f,statusAnggota:h,pengajuans:n}=j().props,x=f.map(a=>a.status),[E]=i.exports.useState(h.status_anggota),t=x.toString().replace("[","").replace("]","").replace('"',"").replace('"',""),[g,r]=i.exports.useState(!1),[u,m]=i.exports.useState(""),l=()=>{const a=new Date().getMonth()+1;return a===1||a===8||a===11},o=()=>{const a=new Date().getMonth()+1,c=new Date().getFullYear();return n.data.filter(P=>{const N=new Date(P.created_at);return N.getMonth()+1===a&&N.getFullYear()===c}).length},p=()=>{if(t!=="PAID"){r(!1),m("Hanya anggota dengan status PAID yang dapat membuat pengajuan");return}if(!l()){r(!1);const c=new Date().toLocaleString("id-ID",{month:"long"});m(`Pengajuan mutasi hanya dapat dibuat pada bulan Januari, Agustus, dan November. Saat ini bulan ${c}`);return}if(o()>=3){r(!1),m("Anda telah mencapai batas maksimal 3 pengajuan dalam bulan ini");return}r(!0),m("")};i.exports.useEffect(()=>{p()},[n,t]);const b=()=>"Januari, Agustus, dan November",s=(()=>{const a=o(),c=Math.max(0,3-a);return{current:a,max:3,remaining:c}})(),v=a=>{switch(a){case"selesai":return"bg-success text-white";case"dikirim":return"bg-info text-white";case"setujui":return"bg-success text-white";case"ditunda":return"bg-warning text-dark";case"revisi":return"bg-warning text-dark";case"tolak":case"ditolak":return"bg-danger text-white";default:return"bg-secondary text-white"}},w=a=>{switch(a){case"selesai":return"fas fa-check-double";case"dikirim":return"fas fa-paper-plane";case"setujui":return"fas fa-check-circle";case"ditunda":return"fas fa-pause-circle";case"revisi":return"fas fa-edit";case"tolak":case"ditolak":return"fas fa-times-circle";default:return"fas fa-clock"}},y=a=>{switch(a){case"selesai":return"Mutasi Selesai";case"dikirim":return"Terkirim ke Tujuan";case"setujui":return"Disetujui Asal";case"ditunda":return"Ditunda Perbaikan";case"revisi":return"Perlu Revisi";case"tolak":case"ditolak":return"Ditolak";default:return"Menunggu"}},k=a=>{switch(a){case"selesai":return"Pengajuan mutasi telah selesai dan diterima oleh DPW/DPC tujuan";case"dikirim":return"Pengajuan telah disetujui oleh DPW/DPC asal dan dikirim ke tujuan";case"setujui":return"Pengajuan telah disetujui oleh DPW/DPC asal";case"ditunda":return"Pengajuan ditunda menunggu perbaikan dokumen";case"revisi":return"Pengajuan perlu direvisi sebelum dapat diproses";case"tolak":case"ditolak":return"Pengajuan mutasi ditolak";default:return"Pengajuan sedang menunggu proses verifikasi"}};return e.createElement(e.Fragment,null,e.createElement(D,null,e.createElement("title",null,"Pengajuan Mutasi - IKATWI")),e.createElement(A,null,e.createElement("div",{className:"container-fluid py-4"},e.createElement("div",{className:"row mb-4"},e.createElement("div",{className:"col-12"},e.createElement("div",{className:"card shadow-sm border-0"},e.createElement("div",{className:"card-body py-4"},e.createElement("div",{className:"row align-items-center"},e.createElement("div",{className:"col-md-8"},e.createElement("h4",{className:"mb-1 text-primary fw-bold"},e.createElement("i",{className:"fas fa-exchange-alt me-2"}),"Pengajuan Mutasi"),e.createElement("p",{className:"text-muted mb-0"},"Kelola pengajuan pindah Anda")),e.createElement("div",{className:"col-md-4 text-md-end"},g?e.createElement(d,{href:"/account/pengajuan/create",className:"btn btn-success btn-lg shadow-sm px-4 py-2"},e.createElement("i",{className:"fas fa-plus-circle me-2"}),"Buat Pengajuan Baru"):e.createElement("button",{className:"btn btn-secondary btn-lg shadow-sm px-4 py-2",disabled:!0,title:u},e.createElement("i",{className:"fas fa-ban me-2"}),"Buat Pengajuan Baru"))))))),e.createElement("div",{className:"row mb-4"},e.createElement("div",{className:"col-xl-2 col-md-4 mb-4"},e.createElement("div",{className:"card shadow-sm border-0 h-100"},e.createElement("div",{className:"card-body text-center"},e.createElement("div",{className:"bg-primary rounded-circle mx-auto mb-3 d-flex align-items-center justify-content-center",style:{width:"60px",height:"60px"}},e.createElement("i",{className:"fas fa-file-alt fa-2x text-white"})),e.createElement("h3",{className:"fw-bold text-dark mb-1"},n.total),e.createElement("p",{className:"text-muted mb-0"},"Total Pengajuan")))),e.createElement("div",{className:"col-xl-2 col-md-4 mb-4"},e.createElement("div",{className:"card shadow-sm border-0 h-100"},e.createElement("div",{className:"card-body text-center"},e.createElement("div",{className:"bg-success rounded-circle mx-auto mb-3 d-flex align-items-center justify-content-center",style:{width:"60px",height:"60px"}},e.createElement("i",{className:"fas fa-calendar-check fa-2x text-white"})),e.createElement("h3",{className:"fw-bold text-dark mb-1"},o()),e.createElement("p",{className:"text-muted mb-0"},"Bulan Ini")))),e.createElement("div",{className:"col-xl-2 col-md-4 mb-4"},e.createElement("div",{className:"card shadow-sm border-0 h-100"},e.createElement("div",{className:"card-body text-center"},e.createElement("div",{className:"bg-info rounded-circle mx-auto mb-3 d-flex align-items-center justify-content-center",style:{width:"60px",height:"60px"}},e.createElement("i",{className:"fas fa-tachometer-alt fa-2x text-white"})),e.createElement("h3",{className:"fw-bold text-dark mb-1"},l()&&t==="PAID"?s.remaining:0),e.createElement("p",{className:"text-muted mb-0"},"Sisa Kuota")))),e.createElement("div",{className:"col-xl-2 col-md-4 mb-4"},e.createElement("div",{className:"card shadow-sm border-0 h-100"},e.createElement("div",{className:"card-body text-center"},e.createElement("div",{className:`rounded-circle mx-auto mb-3 d-flex align-items-center justify-content-center ${l()?"bg-success":"bg-warning"}`,style:{width:"60px",height:"60px"}},e.createElement("i",{className:`fas ${l()?"fa-lock-open":"fa-lock"} fa-2x text-white`})),e.createElement("h6",{className:"fw-bold mb-1"},l()?e.createElement("span",{className:"text-success"},"Periode Buka"):e.createElement("span",{className:"text-warning"},"Periode Tutup")),e.createElement("p",{className:"text-muted mb-0"},"Status Periode")))),e.createElement("div",{className:"col-xl-2 col-md-4 mb-4"},e.createElement("div",{className:"card shadow-sm border-0 h-100"},e.createElement("div",{className:"card-body text-center"},e.createElement("div",{className:`rounded-circle mx-auto mb-3 d-flex align-items-center justify-content-center ${t==="PAID"?"bg-success":"bg-warning"}`,style:{width:"60px",height:"60px"}},e.createElement("i",{className:`fas ${t==="PAID"?"fa-user-check":"fa-user-clock"} fa-2x text-white`})),e.createElement("h6",{className:"fw-bold mb-1"},t==="PAID"?e.createElement("span",{className:"text-success"},"Aktif"):e.createElement("span",{className:"text-warning"},E)),e.createElement("p",{className:"text-muted mb-0"},"Status Anggota"))))),e.createElement("div",{className:"row mb-4"},e.createElement("div",{className:"col-12"},e.createElement("div",{className:"card shadow-sm border-0"},e.createElement("div",{className:"card-header bg-primary text-white py-3"},e.createElement("h5",{className:"mb-0"},e.createElement("i",{className:"fas fa-info-circle me-2"}),"Informasi Pembatasan Pengajuan")),e.createElement("div",{className:"card-body"},e.createElement("div",{className:"row"},e.createElement("div",{className:"col-md-6"},e.createElement("div",{className:"d-flex align-items-center mb-3"},e.createElement("div",{className:"bg-primary rounded-circle p-2 me-3"},e.createElement("i",{className:"fas fa-calendar-alt text-white"})),e.createElement("div",null,e.createElement("h6",{className:"mb-1"},"Periode Pengajuan"),e.createElement("p",{className:"mb-0 text-muted"},"Hanya bulan: ",e.createElement("strong",null,b()))))),e.createElement("div",{className:"col-md-6"},e.createElement("div",{className:"d-flex align-items-center mb-3"},e.createElement("div",{className:"bg-warning rounded-circle p-2 me-3"},e.createElement("i",{className:"fas fa-chart-bar text-white"})),e.createElement("div",null,e.createElement("h6",{className:"mb-1"},"Batas Pengajuan"),e.createElement("p",{className:"mb-0 text-muted"},"Maksimal ",e.createElement("strong",null,"3 pengajuan")," per bulan"))))),l()&&t==="PAID"&&e.createElement("div",{className:"mt-3"},e.createElement("div",{className:"d-flex justify-content-between align-items-center mb-2"},e.createElement("small",{className:"text-muted"},"Pengajuan bulan ini: ",s.current," dari ",s.max),e.createElement("small",{className:`fw-bold ${s.remaining===0?"text-danger":"text-success"}`},"Sisa: ",s.remaining)),e.createElement("div",{className:"progress",style:{height:"8px"}},e.createElement("div",{className:`progress-bar ${s.current>=s.max?"bg-danger":"bg-success"}`,role:"progressbar",style:{width:`${s.current/s.max*100}%`},"aria-valuenow":s.current,"aria-valuemin":"0","aria-valuemax":s.max}))))))),t!=="PAID"&&e.createElement("div",{className:"row mb-4"},e.createElement("div",{className:"col-12"},e.createElement("div",{className:"alert alert-warning border-0 shadow-sm"},e.createElement("div",{className:"d-flex align-items-center"},e.createElement("i",{className:"fas fa-exclamation-triangle fa-2x me-3"}),e.createElement("div",null,e.createElement("h6",{className:"alert-heading mb-1"},"Status Anggota: ",E),e.createElement("p",{className:"mb-0"},"Hanya anggota dengan status ",e.createElement("strong",null,"PAID")," yang diperbolehkan mengajukan mutasi. Silakan hubungi admin untuk informasi lebih lanjut.")))))),t==="PAID"&&!l()&&e.createElement("div",{className:"row mb-4"},e.createElement("div",{className:"col-12"},e.createElement("div",{className:"alert alert-info border-0 shadow-sm"},e.createElement("div",{className:"d-flex align-items-center"},e.createElement("i",{className:"fas fa-calendar-times fa-2x me-3"}),e.createElement("div",null,e.createElement("h6",{className:"alert-heading mb-1"},"Periode Pengajuan Ditutup"),e.createElement("p",{className:"mb-0"},u,". Pengajuan mutasi hanya dapat dibuat pada bulan ",b(),".")))))),t==="PAID"&&l()&&s.remaining===0&&e.createElement("div",{className:"row mb-4"},e.createElement("div",{className:"col-12"},e.createElement("div",{className:"alert alert-warning border-0 shadow-sm"},e.createElement("div",{className:"d-flex align-items-center"},e.createElement("i",{className:"fas fa-exclamation-circle fa-2x me-3"}),e.createElement("div",null,e.createElement("h6",{className:"alert-heading mb-1"},"Batas Pengajuan Tercapai"),e.createElement("p",{className:"mb-0"},u,". Anda dapat membuat pengajuan lagi pada bulan ",b()," di periode berikutnya.")))))),e.createElement("div",{className:"row"},e.createElement("div",{className:"col-12"},e.createElement("div",{className:"card shadow-sm border-0"},e.createElement("div",{className:"card-header bg-primary text-white py-3"},e.createElement("div",{className:"d-flex justify-content-between align-items-center"},e.createElement("h5",{className:"mb-0"},e.createElement("i",{className:"fas fa-list-alt me-2"}),"Daftar Pengajuan"),e.createElement("span",{className:"badge bg-success text-white"},n.total," items"))),e.createElement("div",{className:"card-body p-0"},e.createElement("div",{className:"table-responsive"},e.createElement("table",{className:"table table-hover align-middle mb-0"},e.createElement("thead",{className:"bg-light"},e.createElement("tr",null,e.createElement("th",{className:"ps-4 py-3 text-center",style:{width:"5%"}},"No."),e.createElement("th",{className:"py-3",style:{width:"20%"}},e.createElement("i",{className:"fas fa-user me-2"}),"Pengaju"),e.createElement("th",{className:"py-3",style:{width:"25%"}},e.createElement("i",{className:"fas fa-sticky-note me-2"}),"Keterangan"),e.createElement("th",{className:"py-3 text-center",style:{width:"25%"}},e.createElement("i",{className:"fas fa-info-circle me-2"}),"Status"),e.createElement("th",{className:"pe-4 py-3 text-center",style:{width:"15%"}},e.createElement("i",{className:"fas fa-cogs me-2"}),"Aksi"))),e.createElement("tbody",null,n.data.length>0?n.data.map((a,c)=>e.createElement("tr",{key:a.id,className:"border-bottom"},e.createElement("td",{className:"ps-4 text-center fw-bold text-primary"},++c+(n.current_page-1)*n.per_page),e.createElement("td",null,e.createElement("div",{className:"d-flex align-items-center"},e.createElement("div",{className:"bg-primary rounded-circle d-flex align-items-center justify-content-center me-3",style:{width:"45px",height:"45px"}},e.createElement("i",{className:"fas fa-user text-white"})),e.createElement("div",null,e.createElement("h6",{className:"mb-1 fw-semibold"},a.name),e.createElement("small",{className:"text-muted"},e.createElement("i",{className:"fas fa-calendar me-1"}),new Date(a.created_at).toLocaleDateString("id-ID",{day:"2-digit",month:"short",year:"numeric"}))))),e.createElement("td",null,e.createElement("p",{className:"mb-0 text-muted"},a.keterangan||"-")),e.createElement("td",{className:"text-center"},e.createElement("div",{className:"d-flex flex-column align-items-center"},e.createElement("span",{className:`badge ${v(a.status)} px-3 py-2 mb-2`},e.createElement("i",{className:`${w(a.status)} me-2`}),y(a.status)),e.createElement("small",{className:"text-muted text-center"},k(a.status)),(a.status==="revisi"||a.status==="tolak"||a.status==="ditunda"||a.status==="ditolak")&&a.keterangan_revisi&&e.createElement("div",{className:"mt-2"},e.createElement("div",{className:"alert alert-warning py-2 small mb-0"},e.createElement("i",{className:"fas fa-info-circle me-1"}),a.keterangan_revisi)))),e.createElement("td",{className:"pe-4 text-center"},e.createElement("div",{className:"d-flex justify-content-center gap-2"},(a.status==="revisi"||a.status==="ditunda")&&e.createElement(d,{href:`/account/pengajuan/${a.id}/edit`,className:"btn btn-primary btn-sm rounded-pill px-3 py-2",title:"Edit Pengajuan"},e.createElement("i",{className:"fas fa-edit me-1"}),"Edit"),(a.status==="setujui"||a.status==="dikirim"||a.status==="selesai")&&e.createElement(d,{href:`/account/pengajuan/${a.id}/edit`,className:"btn btn-info btn-sm rounded-pill px-3 py-2",title:"Lihat Detail"},e.createElement("i",{className:"fas fa-eye me-1"}),"Lihat"),(a.status==="belum"||a.status==="revisi")&&e.createElement(I,{URL:"/account/pengajuan",id:a.id,className:"btn btn-danger btn-sm rounded-pill px-3 py-2"}))))):e.createElement("tr",null,e.createElement("td",{colSpan:"5",className:"text-center py-5"},e.createElement("div",{className:"py-4"},e.createElement("i",{className:"fas fa-inbox fa-3x text-muted mb-3"}),e.createElement("h5",{className:"text-muted"},"Belum ada pengajuan"),e.createElement("p",{className:"text-muted mb-3"},t==="PAID"&&l()?"Mulai dengan membuat pengajuan mutasi pertama Anda":t!=="PAID"?"Anda perlu memiliki status PAID untuk membuat pengajuan mutasi":"Saat ini bukan periode pengajuan. Tunggu bulan Januari, Agustus, atau November"),g?e.createElement(d,{href:"/account/pengajuan/create",className:"btn btn-success px-4 py-2"},e.createElement("i",{className:"fas fa-plus-circle me-2"}),"Buat Pengajuan Baru"):e.createElement("button",{className:"btn btn-secondary px-4 py-2",disabled:!0},e.createElement("i",{className:"fas fa-ban me-2"}),"Buat Pengajuan Baru")))))))),n.data.length>0&&e.createElement("div",{className:"card-footer bg-white border-0"},e.createElement("div",{className:"d-flex justify-content-center"},e.createElement(S,{links:n.links,align:"center"})))))))))}export{H as default};
