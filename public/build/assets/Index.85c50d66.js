import{r as n,R as e,H as S}from"./app.dc0ffd6f.js";import{L as A}from"./Web.99f89002.js";import{a as P}from"./index.a7bae296.js";import"./Dropdown.9b289ba0.js";import"./index.ddb2d83e.js";function L({provinces:p,cities:b}){const[c,d]=n.exports.useState([]),[h,u]=n.exports.useState(!1),[m,E]=n.exports.useState(""),[r,g]=n.exports.useState(""),[o,N]=n.exports.useState(""),f=new Date,i=(a,t,l)=>{u(!0),d([]),P.post("/searchAnggota",{q:a,dpc:t,dpw:l}).then(s=>{console.log("data",s),u(!1),d(s.data.anggota.data)})},v=a=>{const t=a.target.value;N(t),i(t,r,m)},y=a=>{const t=a.target.value;E(t),i(o,r,t)},x=a=>{const t=a.target.value;g(t),i(o,t,m)},k=()=>{N(""),E(""),g(""),d([])},w=a=>{if(a.length===0)return{status:"Belum Bayar",tahun:"",isPaid:!1};const l=a.sort((s,C)=>C.tahun-s.tahun)[0];return{status:l.status,tahun:l.tahun,isPaid:!0}};return e.createElement(e.Fragment,null,e.createElement(S,null,e.createElement("title",null,"IKATWI - Daftar Anggota")),e.createElement(A,null,e.createElement("div",{className:"container",style:{marginTop:"100px",marginBottom:"50px"}},e.createElement("div",{className:"fade-in"},e.createElement("div",{className:"row justify-content-center"},e.createElement("div",{className:"col-md-10"},e.createElement("div",{className:"text-center mb-4"},e.createElement("h4",{className:"font-weight-bold text-primary mb-2"},e.createElement("i",{className:"fas fa-users me-2"}),"Daftar Anggota IKATWI"),e.createElement("p",{className:"text-muted"},"Temukan informasi anggota Ikatan Terapis Wicara Indonesia")),e.createElement("div",{className:"card border-0 rounded-lg shadow-sm mb-4"},e.createElement("div",{className:"card-body p-4"},e.createElement("div",{className:"row g-3"},e.createElement("div",{className:"col-md-6"},e.createElement("div",{className:"input-group"},e.createElement("span",{className:"input-group-text bg-light border-end-0"},e.createElement("i",{className:"fas fa-search text-muted"})),e.createElement("input",{type:"text",className:"form-control border-start-0",value:o,onChange:v,placeholder:"Cari berdasarkan nama atau nomor anggota..."}))),e.createElement("div",{className:"col-md-3"},e.createElement("select",{className:"form-select",onChange:y,value:m},e.createElement("option",{value:""},"Semua DPW"),p.map(a=>e.createElement("option",{key:a.id,value:a.id},a.name)))),e.createElement("div",{className:"col-md-3"},e.createElement("select",{className:"form-select",onChange:x,value:r},e.createElement("option",{value:""},"Semua DPC"),b.map(a=>e.createElement("option",{key:a.id,value:a.id},a.name))))),e.createElement("div",{className:"row mt-3"},e.createElement("div",{className:"col-12"},e.createElement("button",{onClick:k,className:"btn btn-outline-secondary btn-sm"},e.createElement("i",{className:"fas fa-times me-1"}),"Hapus Filter"))))),c.length>0&&e.createElement("div",{className:"alert alert-info mb-3"},e.createElement("i",{className:"fas fa-info-circle me-2"}),"Menampilkan ",c.length," anggota"),e.createElement("div",{className:"card border-0 rounded-lg shadow-sm"},e.createElement("div",{className:"card-header bg-primary text-white py-3"},e.createElement("h5",{className:"mb-0"},e.createElement("i",{className:"fas fa-list me-2"}),"Data Anggota")),e.createElement("div",{className:"card-body p-0"},h?e.createElement("div",{className:"text-center py-5"},e.createElement("div",{className:"spinner-border text-primary mb-3",role:"status"},e.createElement("span",{className:"visually-hidden"},"Loading...")),e.createElement("p",{className:"text-muted"},"Memuat data anggota...")):c.length>0?e.createElement("div",{className:"table-responsive"},e.createElement("table",{className:"table table-hover mb-0"},e.createElement("thead",{className:"bg-light"},e.createElement("tr",null,e.createElement("th",{scope:"col",style:{width:"5%"}},"No"),e.createElement("th",{scope:"col",style:{width:"10%"}},"Foto"),e.createElement("th",{scope:"col",style:{width:"15%"}},"No Anggota"),e.createElement("th",{scope:"col",style:{width:"18%"}},"Nama"),e.createElement("th",{scope:"col",style:{width:"15%"}},"DPW"),e.createElement("th",{scope:"col",style:{width:"15%"}},"DPC"),e.createElement("th",{scope:"col",style:{width:"12%"}},"Status SIP"),e.createElement("th",{scope:"col",style:{width:"10%"}},"Status Iuran"))),e.createElement("tbody",null,c.map((a,t)=>{const l=w(a.transaction);return e.createElement("tr",{key:t,className:"align-middle"},e.createElement("td",{className:"text-center fw-bold text-muted"},t+1),e.createElement("td",{className:"text-center"},e.createElement("img",{src:a.image,className:"rounded-circle border",width:"50",height:"50",alt:a.name,onError:s=>{s.target.onerror=null,s.target.src="/assets/images/user.png"},style:{objectFit:"cover"}})),e.createElement("td",null,e.createElement("span",{className:"badge bg-primary text-white fw-normal fs-6"},a.no_anggota)),e.createElement("td",{className:"fw-semibold text-dark"},a.name),e.createElement("td",null,e.createElement("span",{className:"badge bg-info text-dark"},a.province.name)),e.createElement("td",null,a.city===0?e.createElement("span",{className:"badge bg-warning text-dark"},e.createElement("i",{className:"fas fa-exclamation-triangle me-1"}),"DPC tidak ada"):e.createElement("span",{className:"badge bg-success"},a.city.name)),e.createElement("td",null,new Date(a.surat_sip.map(s=>s.date_end))>=f?e.createElement("span",{className:"badge bg-success"},e.createElement("i",{className:"fas fa-check me-1"}),"Aktif"):e.createElement("span",{className:"badge bg-danger"},e.createElement("i",{className:"fas fa-times me-1"}),"Non Aktif")),e.createElement("td",null,l.isPaid?e.createElement("span",{className:"badge bg-success"},e.createElement("i",{className:"fas fa-check me-1"}),l.tahun):e.createElement("span",{className:"badge bg-warning text-dark"},e.createElement("i",{className:"fas fa-clock me-1"}),"Belum Bayar")))})))):e.createElement("div",{className:"text-center py-5"},e.createElement("i",{className:"fas fa-users fa-3x text-muted mb-3"}),e.createElement("h5",{className:"text-muted"},"Tidak ada data anggota"),e.createElement("p",{className:"text-muted"},o||m||r?"Coba ubah kata kunci atau filter pencarian":"Gunakan form pencarian di atas untuk menemukan anggota")))),e.createElement("div",{className:"row mt-4"},e.createElement("div",{className:"col-md-12"},e.createElement("div",{className:"card border-0 bg-light rounded-lg"},e.createElement("div",{className:"card-body py-3"},e.createElement("h6",{className:"mb-3"},e.createElement("i",{className:"fas fa-info-circle me-2 text-primary"}),"Keterangan Status:"),e.createElement("div",{className:"row"},e.createElement("div",{className:"col-md-3 mb-2"},e.createElement("span",{className:"badge bg-success me-2"},"\u25CF"),e.createElement("small",null,"Aktif")),e.createElement("div",{className:"col-md-3 mb-2"},e.createElement("span",{className:"badge bg-danger me-2"},"\u25CF"),e.createElement("small",null,"Non Aktif")),e.createElement("div",{className:"col-md-3 mb-2"},e.createElement("span",{className:"badge bg-warning text-dark me-2"},"\u25CF"),e.createElement("small",null,"Belum Bayar")),e.createElement("div",{className:"col-md-3 mb-2"},e.createElement("span",{className:"badge bg-primary me-2"},"\u25CF"),e.createElement("small",null,"No Anggota")))))))))))))}export{L as default};
